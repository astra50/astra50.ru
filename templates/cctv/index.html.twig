{% extends 'layout.html.twig' %}

{% set title = 'Видеонаблюдение' %}

{% block content %}
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <div class="responsive">
        <video id="video" controls></video>
    </div>

    <script>
      if (Hls.isSupported()) {
        var video = document.getElementById('video');
        var hls = new Hls({
          debug: true,
          autoStartLoad: true,
        });
        hls.attachMedia(video);

        hls.on(Hls.Events.MEDIA_ATTACHED, function() {
          console.log('video and hls.js are now bound together !');

          hls.loadSource('/cctv/streaming.m3u8');

          hls.on(Hls.Events.MANIFEST_PARSED, function(event, data) {
            console.log('manifest loaded, found ' + data.levels.length + ' quality level');
          });
        });
      }
    </script>
{% endblock %}
